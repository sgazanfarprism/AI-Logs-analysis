# SMTP Email Configuration

# SMTP Server Settings
host: ${SMTP_HOST}
port: ${SMTP_PORT}
use_tls: true
use_ssl: false

# Authentication
username: ${SMTP_USERNAME}
password: ${SMTP_PASSWORD}

# Email Settings
from_address: ${SMTP_USERNAME}
from_name: "Agentic Log Analysis System"

# Recipients
recipients: ${ALERT_RECIPIENTS}  # Comma-separated list

# Email Format
subject_template: "[Log Alert] {severity} - {error_count} errors detected in {time_range}"

# Retry Configuration
max_retries: 3
retry_delay: 5  # seconds
timeout: 30  # seconds

# Email Content Settings
include_full_logs: false  # Include full log entries in email
max_errors_in_email: 20  # Maximum errors to include in detail
truncate_long_messages: true
max_message_length: 500  # characters

# HTML Email Template
html_template: |
  <!DOCTYPE html>
  <html>
  <head>
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
      .header { background-color: #d32f2f; color: white; padding: 20px; }
      .summary { background-color: #f5f5f5; padding: 15px; margin: 20px 0; }
      .section { margin: 20px 0; }
      .error-item { border-left: 3px solid #ff5722; padding-left: 10px; margin: 10px 0; }
      .solution { background-color: #e8f5e9; padding: 15px; margin: 10px 0; }
      .footer { color: #666; font-size: 12px; margin-top: 30px; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
      th { background-color: #f2f2f2; }
      .critical { color: #d32f2f; font-weight: bold; }
      .high { color: #ff5722; font-weight: bold; }
      .medium { color: #ff9800; }
      .low { color: #4caf50; }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>Log Analysis Alert</h1>
      <p>Automated analysis completed at {timestamp}</p>
    </div>
    
    <div class="summary">
      <h2>Executive Summary</h2>
      <p><strong>Time Range:</strong> {time_range}</p>
      <p><strong>Total Errors:</strong> {error_count}</p>
      <p><strong>Severity:</strong> <span class="{severity_class}">{severity}</span></p>
      <p><strong>Affected Services:</strong> {affected_services}</p>
    </div>
    
    <div class="section">
      <h2>Error Details</h2>
      {error_details}
    </div>
    
    <div class="section">
      <h2>Root Cause Analysis</h2>
      {rca_content}
    </div>
    
    <div class="section">
      <h2>Recommended Solutions</h2>
      {solution_content}
    </div>
    
    <div class="footer">
      <p>This is an automated alert from the Agentic Log Analysis System.</p>
      <p>For questions or issues, contact the DevOps team.</p>
      <p> Regards,</p>
      <p>Syed Gazanfar</p>
    </div>
  </body>
  </html>
