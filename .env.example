# Agentic AI Log Analysis System - Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# ELASTICSEARCH CONFIGURATION
# ============================================================================
ES_HOST=elasticsearch
ES_PORT=9200
ES_USERNAME=elastic
ES_PASSWORD=your-secure-password

# Index Patterns (comma-separated for multiple environments)
# Based on filebeat.yml configuration with daily rotation
ES_INDEX_PATTERN=ecs-logs-prod-*,ecs-logs-uat-*,aks-logs-prod-*,aks-logs-uat-*

ES_USE_SSL=false

# ============================================================================
# AWS CLOUDWATCH CONFIGURATION (for ECS Logs)
# ============================================================================
# SECURITY WARNING: Use IAM roles in production instead of hardcoded credentials
# These credentials are used by Filebeat to fetch logs from AWS CloudWatch

# AWS Credentials (ROTATE IMMEDIATELY if exposed)
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# AWS Regions for ECS Logs
AWS_REGION_PROD=us-east-1
AWS_REGION_UAT=us-east-2

# CloudWatch Log Groups
AWS_CLOUDWATCH_LOG_GROUP=/ecs/myapp

# CloudWatch Scan Settings
AWS_CLOUDWATCH_SCAN_FREQUENCY=10s
AWS_CLOUDWATCH_START_POSITION=end

# ============================================================================
# AKS (Azure Kubernetes Service) LOG PATHS
# ============================================================================
# File paths where AKS logs are stored (monitored by Filebeat)

# AKS Production Logs
AKS_LOGS_PROD_PATH=/var/log/aks-logs-prod
AKS_LOGS_PROD_PATTERN=*.log

# AKS UAT Logs
AKS_LOGS_UAT_PATH=/var/log/aks-logs-uat
AKS_LOGS_UAT_PATTERN=*.log

# Multiline Log Pattern (ISO 8601 timestamp)
AKS_MULTILINE_PATTERN=^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}
AKS_MULTILINE_NEGATE=true
AKS_MULTILINE_MATCH=after

# ============================================================================
# OPENAI CONFIGURATION
# ============================================================================
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.3
OPENAI_MAX_TOKENS=2000

# ============================================================================
# SMTP EMAIL CONFIGURATION
# ============================================================================

# Gmail Example:
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_USE_TLS=true

# Office365 Example:
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@company.com
# SMTP_PASSWORD=your-password
# SMTP_USE_TLS=true

# Alert Recipients (comma-separated)
ALERT_RECIPIENTS=team@company.com,oncall@company.com,devops@company.com

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE=logs/agentic_log_analysis.log

# ============================================================================
# ANALYSIS CONFIGURATION
# ============================================================================
DEFAULT_ANALYSIS_HOURS=24
MAX_LOGS_PER_RUN=100000

# ============================================================================
# NOTES
# ============================================================================
# - Never commit the .env file to version control
# - Use app-specific passwords for Gmail (not your regular password)
# - Ensure Elasticsearch is accessible from this machine
# - Test configuration with: python orchestrator/orchestrator.py --health-check
# 
# AWS SECURITY BEST PRACTICES:
# - NEVER hardcode AWS credentials in filebeat.yml or any config files
# - Use IAM roles with EC2/ECS instances instead of access keys
# - If using access keys, rotate them regularly (every 90 days minimum)
# - Use AWS Secrets Manager or Parameter Store for credential management
# - Enable AWS CloudTrail to monitor credential usage
# - Apply principle of least privilege to IAM policies
#
# FILEBEAT CONFIGURATION:
# - This .env file provides credentials that can be referenced in filebeat.yml
# - Update filebeat.yml to use environment variables: ${AWS_ACCESS_KEY_ID}
# - Elasticsearch indices are created daily with pattern: <env>-logs-<platform>-YYYY.MM.DD
# - Ensure Filebeat has network access to both AWS CloudWatch and Elasticsearch
